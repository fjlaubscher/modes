(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{66:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(37),i=n(5),l=n.n(i),c=n(3),u=n(50),s=n(4),p=c.b.div.withConfig({displayName:"style__Container",componentId:"sc-1l54luc-0"})(["display:flex;align-items:center;width:100%;@media (min-width:","px){max-width:300px;}"],s.a.small),m=c.b.label.withConfig({displayName:"style__StyledLabel",componentId:"sc-1l54luc-1"})(["white-space:nowrap;margin-right:0.5rem;width:100px;@media (min-width:","px){min-width:unset;}"],s.a.small),f=c.b.input.withConfig({displayName:"style__StyledInput",componentId:"sc-1l54luc-2"})(["font-family:'Source Sans Pro';font-size:1rem;min-height:38px;padding:2px 8px;background-color:hsl(0,0%,100%);border-color:hsl(0,0%,80%);border-radius:4px;border-style:solid;border-width:1px;display:block;flex-grow:1;:focus{border-color:",";}"],s.b.dodgerBlue),d=Object(c.b)(u.a).withConfig({displayName:"dropdown__StyledSelect",componentId:"sc-17omklo-0"})(["display:block;z-index:2;flex-grow:1;"]),y=function(e){var t=e.className,n=e.label,r=e.options,a=e.onChange;return o.a.createElement(p,{className:t},o.a.createElement(m,null,n),o.a.createElement(d,{isSearchable:!1,options:r,defaultValue:r[0],onChange:a}))};y.propTypes={className:l.a.string,options:l.a.arrayOf(l.a.shape({label:l.a.string,value:l.a.string})).isRequired,label:l.a.string.isRequired,onChange:l.a.func};var b=y,h=n(63),v=n.n(h),g=n(64),w=n.n(g),x=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],O=[{note:"E",pitch:2},{note:"A",pitch:2},{note:"D",pitch:3},{note:"G",pitch:3},{note:"B",pitch:3},{note:"E",pitch:4}],E=function(e){var t=e.map(function(e,t){return e.map(function(e){return function(e,t){for(var n=x.indexOf(O[e].note),r=O[e].pitch,o=n+t,a=o/12,i=a>=1?Math.floor(a):0,l=o;l>=12;)l-=12;return"".concat(x[l]).concat(r+i)}(t,e)})});return[].concat.apply([],t)},k=c.b.div.withConfig({displayName:"style__Container",componentId:"sc-1dmlgf4-0"})(["display:flex;flex-direction:column;"]),S=c.b.div.withConfig({displayName:"style__Line",componentId:"sc-1dmlgf4-1"})(["display:grid;grid-column-gap:0.2rem;grid-template-columns:repeat(auto-fill,0.75rem);align-items:center;justify-content:start;padding:0 0.5rem;position:relative;font-size:0.75rem;:before{position:absolute;content:'';display:block;height:1px;width:100%;background-color:",";}@media (min-width:","px){grid-column-gap:0.35rem;}@media (min-width:","px){grid-column-gap:0.5rem;font-size:1rem;grid-template-columns:repeat(auto-fill,1rem);}"],s.b.black,s.a.xs,s.a.small),N=c.b.div.withConfig({displayName:"style__Note",componentId:"sc-1dmlgf4-2"})(["grid-column-start:",";grid-column-end:",";z-index:1;text-align:center;background-color:",";color:",";"],function(e){return e.column||1},function(e){var t=e.column;return t&&t+1||2},s.b.white,function(e){return e.active&&s.b.dodgerBlue||s.b.black});function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=new h.Distortion(.8).toMaster(),R=new h.MonoSynth({oscillator:{type:"sine"},envelope:{attack:0}}).connect(P),q=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=_(t).call(this,e))||"object"!==j(o)&&"function"!=typeof o?I(r):o,A(I(n),"activeNote",0),A(I(n),"loop",null),n.state={activeNote:0},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.notes,r=t.tempo;w()(v.a.context).then(function(){e.loop.start(0)});var o=E(n);h.Transport.bpm.value=r,this.loop=new h.Pattern(function(t,n){R.triggerAttackRelease(n,t),h.Draw.schedule(function(){e.activeNote>=18&&(e.activeNote=0),e.setState({activeNote:e.activeNote}),e.activeNote++},t)},o,"up")}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.play,r=t.tempo,o=t.notes;e.tempo!==r&&(console.log("tempo changed"),h.Transport.bpm.value=r),JSON.stringify(e.notes)!==JSON.stringify(o)&&(console.log("notes changed"),this.loop.values=E(o)),e.play!==n&&(this.activeNote=0,this.setState({activeNote:0}),n?this.start():this.stop())}},{key:"stop",value:function(){this.loop.stop(0),this.loop.index=0,h.Transport.stop(),R.volume.value=-100}},{key:"start",value:function(){this.loop.start(0),h.Transport.start(),R.volume.value=-30}},{key:"render",value:function(){var e=this.props,t=e.notes,n=e.play,r=this.state.activeNote;return o.a.createElement(k,null,t.map(function(e,t){return o.a.createElement(S,{key:"".concat(t,"-string")},e.map(function(e,a){var i=3*t+(a+1);return o.a.createElement(N,{key:"".concat(e,"-note"),column:i,active:n&&r===i-1},e)}))}).reverse())}}])&&C(n.prototype,a),i&&C(n,i),t}();q.propTypes={notes:l.a.arrayOf(l.a.arrayOf(l.a.number)).isRequired,play:l.a.bool.isRequired,tempo:l.a.number.isRequired};var z=q;function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var D=function(e){e.className;var t=e.label,n=B(e,["className","label"]);return o.a.createElement(p,null,o.a.createElement(m,null,t),o.a.createElement(f,n))};D.propTypes={className:l.a.string,label:l.a.string.isRequired};var M=D,J=c.b.button.withConfig({displayName:"style__StyledButton",componentId:"lefwvf-0"})(["display:block;border:none;cursor:pointer;padding:1rem;background-color:",";outline:none;svg{height:32px;}@media (min-width:","px){padding:0;background-color:",";}"],s.b.gallery,s.a.small,s.b.white);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var V=o.a.createElement("path",{d:"M15.745 15.978l59.131 34.14-59.131 34.137z"}),F=function(e){return o.a.createElement("svg",G({viewBox:"0 0 100 100"},e),V)};n.p;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var L=o.a.createElement("path",{d:"M15.744 15.743h68.512v68.514H15.744z"}),U=function(e){return o.a.createElement("svg",H({viewBox:"0 0 100 100"},e),L)},K=(n.p,function(e){var t=e.onClick,n=e.play;return o.a.createElement(J,{onClick:t},!n&&o.a.createElement(F,null)||o.a.createElement(U,null))});K.propTypes={onClick:l.a.func.isRequired,play:l.a.bool.isRequired};var Q=K,W=c.b.div.withConfig({displayName:"style__ControlsSection",componentId:"d8ktxs-0"})(["display:flex;flex-direction:column;> div,button{margin-bottom:1rem;}@media (min-width:","px){flex-direction:row;justify-content:space-between;align-items:center;}"],s.a.small),X={ionian:[[2,4,5],[2,4,5],[1,2,4],[1,2,4],[0,2,4],[0,2,4]],dorian:[[2,3,5],[2,3,5],[0,2,4],[0,2,4],[0,2,4],[0,2,3]],phrygian:[[1,3,5],[1,3,5],[0,2,4],[0,2,3],[0,2,3],[0,1,3]],lydian:[[2,4,6],[2,4,5],[1,3,4],[1,2,4],[1,2,4],[0,2,4]],mixolydian:[[2,4,5],[2,3,5],[1,3,4],[0,2,4],[0,2,4],[0,2,4]],aeolian:[[2,3,5],[1,3,5],[0,2,4],[0,2,4],[0,2,3],[0,2,3]],locrian:[[1,3,5],[1,3,5],[0,2,3],[0,2,3],[0,1,3],[0,1,3]]};function Y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $=Object.keys(X).map(function(e){var t=e;return{label:t.charAt(0).toUpperCase()+t.slice(1),value:e}});t.default=function(){var e=Z(Object(r.useState)(3),2),t=e[0],n=e[1],i=Z(Object(r.useState)("ionian"),2),l=i[0],c=i[1],u=Z(Object(r.useState)(120),2),s=u[0],p=u[1],m=Z(Object(r.useState)(!1),2),f=m[0],d=m[1],y=function(e,t){var n=e>=0&&e<=24&&e||0;return Y(X[t]).reverse().map(function(e){return e.map(function(e){return n+e})})}(t,l);return o.a.createElement("div",null,o.a.createElement(a.Helmet,{title:"Modes"}),o.a.createElement(W,null,o.a.createElement(Q,{play:f,onClick:function(){return d(!f)}}),o.a.createElement(M,{label:"Tempo",type:"number",min:"0",defaultValue:120,onChange:function(e){d(!1),e.target.value&&p(parseInt(e.target.value))}})),o.a.createElement(W,null,o.a.createElement(M,{label:"Starting fret",type:"number",min:"0",max:"24",defaultValue:3,onChange:function(e){d(!1),e.target.value&&n(parseInt(e.target.value))}}),o.a.createElement(b,{label:"Select a mode",options:$,onChange:function(e){d(!1),c(e.value)}})),o.a.createElement(z,{notes:y,play:f,tempo:s}))}}}]);